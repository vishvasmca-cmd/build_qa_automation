common_elements:
  cart: '[data-test=''shopping-cart-link''], .shopping_cart_link, .fa-shopping-cart'
  checkout: '[data-test=''checkout''], button:contains(''Checkout'')'
  login_button: input[type='submit'], button:contains('Login')
learned_rules:
- Ensure pytest-playwright is installed and configured correctly in the test environment.
  Verify the 'page' fixture is available and correctly scoped for the tests.
- Ensure Playwright's `page` fixture is correctly configured and accessible in Pytest
  environments before running tests. Verify installation, configuration files (e.g.,
  pytest.ini or conftest.py), and fixture definitions.
- Ensure Playwright is correctly configured as a pytest plugin and that the 'page'
  fixture is properly injected into tests. Verify playwright.ini or pytest.ini configuration.
- Ensure all triple-quoted strings (docstrings and multiline comments) are properly
  terminated with a matching set of triple quotes (''' or """) within each module;
  validate code formatting through linting.
- When specifying file paths in Python, especially on Windows, use raw strings (r'path')
  or escape backslashes ('\\') to prevent them from being interpreted as escape sequences.
- If an action (like 'About Us') opens a modal/overlay, you MUST close it (click 'Close'
  button or press Esc) before interacting with other elements to prevent interception
  errors.
- When printing messages to the console, especially error messages that might be logged,
  ensure that the encoding is set to UTF-8 to support a wider range of characters,
  including emojis.
- When generating screenshot filenames or paths, avoid using Unicode characters, especially
  emojis, to prevent encoding errors in environments with limited character set support.
- Before interacting with sort options, ensure the dropdown is fully expanded and
  the options are visible. Check the display attribute.
- Before interacting with the product sorting dropdown, ensure that the dropdown is
  fully loaded and that all options are present in the DOM. Implement a retry mechanism
  with exponential backoff for cases where the dropdown options are not immediately
  available.
- When interacting with sort options, ensure the dropdown or list containing the options
  is fully loaded and visible before attempting to click a specific option. Implement
  a retry mechanism or increase the timeout if necessary.
- When interacting with dropdown menus, ensure the dropdown is fully expanded and
  visible before attempting to click on any option within it.
- Ensure that the `core` module (containing templates and helper functions) is correctly
  included in the Python path or project structure before running tests in the `projects/demo_complex`
  directory.
- Before interacting with the search input field, ensure the page has fully loaded
  and any overlaying elements (e.g., modals, banners) that might obstruct the element
  are dismissed. The page might have dynamic content that delays the rendering of
  the search input.
- Before interacting with the search input field (#search_product), ensure that any
  overlaying elements (e.g., modals, banners, or loading screens) are dismissed or
  have completed their animation/transition.
- When filling the email field on the login/signup page, explicitly target the form
  intended for login or signup to avoid ambiguity. Use `filter(has_text='Login')`
  or `filter(has_text='Signup')` to disambiguate forms.
- When navigating to the products page, anticipate potential delays in network activity.
  Increase the default timeout or implement more robust checks for page readiness
  beyond 'networkidle', such as verifying the presence of key elements.
- When filling the email field on the login page, ensure the locator is specific to
  the login form to avoid ambiguity with the signup form's email field. Prioritize
  locators with explicit form association.
- When filling email fields on the login/signup page, disambiguate between the login
  and signup forms. Use specific locators targeting each form or filter by text content
  (Login or Signup).
- When filling email fields on pages with both Login and Signup forms, use more specific
  locators to target the intended field.
- When filling email fields on pages with both login and signup forms, ensure locators
  are specific to the intended form (login or signup) to avoid ambiguity.
- Before clicking 'Add to cart', ensure the element is visible and enabled. Implement
  retry logic with short intervals if necessary.
- Before interacting with the search input, ensure any modals or overlays are closed
  or dismissed.  Implement a short wait and retry mechanism if the element is not
  immediately available.
- When interacting with elements found by `locator.first()`, ensure you're performing
  an action on the element and not attempting to call the locator itself.
- When navigating to or after submitting a form on automationexercise.com, increase
  the default timeout or use a less strict load state like 'domcontentloaded' or 'load'
  to avoid intermittent timeout issues.
- When navigating to automationexercise.com, be aware of potential long-running background
  network requests. If 'networkidle' is required, consider implementing a shorter
  timeout or a more lenient load state check (e.g., 'domcontentloaded'). Alternatively,
  investigate and resolve the source of the ongoing network requests.
- Before navigating to the 'Products' page, ensure any modals or overlays are closed
  to prevent them from obscuring the target link.  Consider using explicit waits for
  the absence of these obstructing elements.
workflow_rules:
- Always search for a cart icon after adding an item.
- If login fails, check for error-message-container.

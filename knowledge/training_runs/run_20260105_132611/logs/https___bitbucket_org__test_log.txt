ğŸš€ Starting autonomous test for https://bitbucket.org/
Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
ğŸ¤– CI Environment detected: Forcing Headless Mode
ğŸš€ Explorer: Starting Strategy 2026. Goal: Autonomous smoke test: Navigate site, explore main features, verify key elements

--- Step 1 ---
ğŸ” Mining Page (2026 Strategy): https://bitbucket.org/
ğŸ“ On Page: Bitbucket
ğŸ¤” State: login_screen
ğŸ“¡ Sending 190 elements to the Planner...
ğŸ’­ Thought: The goal is to navigate the site and explore the main features. I am on the login screen and do not have credentials. I will explore the 'Pricing' page to avoid the login screen. There is an element with the text 'Pricing' and tag 'a', with id 14. I will click it.
   âœ¨ Refined: page.get_by_role("link", { name: "Pricing" })
ğŸ–±ï¸ Clicking ID=14 (Pricing)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 190 elements saved.

--- Step 2 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket/pricing
ğŸ“ On Page: Bitbucket Pricing
ğŸ¤” State: login_screen
ğŸ“¡ Sending 0 elements to the Planner...
ğŸ’­ Thought: The user wants to explore the site as part of a smoke test. I am currently on the pricing page. Since there are no credentials in test data, I will skip login and instead explore publicly available areas. I will navigate back to the homepage to explore from there.
ğŸŒ Navigating to https://www.atlassian.com/software/bitbucket
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 0 elements saved.

--- Step 3 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket
ğŸ“ On Page: Bitbucket
ğŸ¤” State: login_screen
ğŸ“¡ Sending 198 elements to the Planner...
ğŸ’­ Thought: I am on the Bitbucket homepage, which is a login screen. The history indicates that I already navigated to the pricing page and then back to the homepage. The goal is to navigate the site and explore main features. Since there are no credentials, I will explore public links. I will now click the 'Why Bitbucket' dropdown to see the options under it.
   âœ¨ Refined: page.get_by_role("button", { name: "Why Bitbucket" })
ğŸ–±ï¸ Clicking ID=8 (Why Bitbucket)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 198 elements saved.

--- Step 4 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket
ğŸ“ On Page: Bitbucket
ğŸ¤” State: login_screen
ğŸ“¡ Sending 220 elements to the Planner...
ğŸ’­ Thought: The goal is to navigate the site and explore main features. The previous actions were to click 'Why Bitbucket' after navigating to the Bitbucket homepage. Since the page is now on the login screen but there is no login information, I will click on the 'Pricing' link next. This allows me to explore a key feature of the site without logging in.
   âœ¨ Refined: page.get_by_role("link", { name: "Pricing" })
ğŸ–±ï¸ Clicking ID=14 (Pricing)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 220 elements saved.

--- Step 5 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket/pricing
ğŸ“ On Page: Bitbucket Pricing
ğŸ¤” State: pricing
ğŸ“¡ Sending 255 elements to the Planner...
ğŸ’­ Thought: The goal is to navigate the site and explore the main features. I have already navigated to the pricing page. Now, I will click the 'Why Bitbucket' link to explore another main feature of the website.
   âœ¨ Refined: page.get_by_role("button", { name: "Why Bitbucket" })
ğŸ–±ï¸ Clicking ID=19 (Why Bitbucket)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 255 elements saved.

--- Step 6 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket/pricing
ğŸ“ On Page: Bitbucket Pricing
ğŸ¤” State: login_screen
ğŸ“¡ Sending 401 elements to the Planner...
ğŸ’­ Thought: I am currently on the Bitbucket Pricing page. The goal is to autonomously smoke test the site, explore the main features, and verify key elements. I have already clicked on 'Pricing' and 'Why Bitbucket' links multiple times. To proceed with exploring main features, I will now click on the 'Cloud Security' link.
   âœ¨ Refined: page.get_by_role("link", { name: "Cloud Security" })
ğŸ–±ï¸ Clicking ID=25 (Cloud Security)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 401 elements saved.

--- Step 7 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket/pricing
ğŸ“ On Page: Bitbucket Pricing
ğŸ¤” State: pricing
ğŸ“¡ Sending 401 elements to the Planner...
ğŸ’­ Thought: I have navigated to the pricing page, clicked on 'Why Bitbucket', 'Pricing' again, then 'Why Bitbucket' again, and finally 'Cloud Security'. The goal is to explore the main features. I'll click on another main feature, 'DevSecOps'.
   âœ¨ Refined: page.get_by_role("link", { name: "DevSecOps" })
ğŸ–±ï¸ Clicking ID=27 (DevSecOps)
   ğŸ‘‰ Locator failed. Using coordinate fallback.
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 401 elements saved.

--- Step 8 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket/pricing
ğŸ“ On Page: Bitbucket Pricing Page
ğŸ¤” State: login_screen
ğŸ“¡ Sending 389 elements to the Planner...
ğŸ’­ Thought: The goal is to navigate the site and explore main features. I've already clicked on a few features. Now I am on the pricing page. I will click the 'Get it Free' button to navigate to a free option.
   âš ï¸ Refinement timeout/error: Locator.evaluate: Error: strict mode violation: lo...
   âœ¨ Refined: page.get_by_text('Get it Free')
ğŸ–±ï¸ Clicking ID=25 (Get it Free)
   ğŸ‘‰ Locator failed. Using coordinate fallback.
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 389 elements saved.

--- Step 9 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket/pricing
   âš ï¸ Error mining main frame: Page.evaluate: Execution context was destroyed, most likely because of a navigation
ğŸ“ On Page: Bitbucket Pricing
ğŸ¤” State: pricing_page
ğŸ“¡ Sending 0 elements to the Planner...
ğŸ’­ Thought: The goal is to smoke test the site, exploring main features and verifying key elements. I have already navigated to the pricing page and clicked on a few links there ('Why Bitbucket', 'Cloud Security', 'DevSecOps', 'Get it Free'). Since there are no interactive elements on the current page according to `elements`, I should navigate back to the home page to explore other main features.
ğŸŒ Navigating to https://www.atlassian.com/software/bitbucket
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 0 elements saved.

--- Step 10 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/software/bitbucket
ğŸ“ On Page: Bitbucket
ğŸ¤” State: login_screen
ğŸ“¡ Sending 198 elements to the Planner...
ğŸ’­ Thought: I have already navigated back to the landing page. The goal is to navigate the site and explore main features. Since I don't have login credentials, I will skip signing in and instead explore public areas like the footer links. Clicking on 'Company' will help explore the site.
   âœ¨ Refined: page.get_by_role("link", { name: "Company" })
ğŸ–±ï¸ Clicking ID=95 (Company)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 198 elements saved.

--- Step 11 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/company
ğŸ“ On Page: Atlassian Company Page
ğŸ¤” State: dashboard
ğŸ“¡ Sending 244 elements to the Planner...
ğŸ’­ Thought: The goal is to perform a smoke test, exploring main features and verifying key elements. I'm currently on the Atlassian Company page. I've already navigated to the company page. Now I will click on the 'Customers' link to explore another main feature.
   âœ¨ Refined: page.get_by_role("link", { name: "Customers" })
ğŸ–±ï¸ Clicking ID=29 (Customers)
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
ğŸ’¾ Passive Collection: 244 elements saved.

--- Step 12 ---
ğŸ” Mining Page (2026 Strategy): https://www.atlassian.com/customers
ğŸ“ On Page: Atlassian Customers
ğŸ¤” State: dashboard
ğŸ“¡ Sending 0 elements to the Planner...
ğŸ’­ Thought: I have successfully navigated to the Customers page. The goal is to perform an autonomous smoke test and verify key elements. Since the current page showcases customer stories, and the element list is empty, there is nothing else to click to navigate or fill. I will consider this goal achieved since there is nothing left to do.
âœ… Goal Achieved!
ğŸ’¾ Trace saved to projects/https___bitbucket_org__regression/outputs/trace.json
  File "/home/runner/work/build_qa_automation/build_qa_automation/core/refiner.py", line 71
    - Syntax: `smart_action(page, """playwright_locator_string""", "action_type", value="optional_value")`
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: invalid syntax
Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
ğŸš€ Triggering agent with config: /home/runner/work/build_qa_automation/build_qa_automation/projects/https___bitbucket_org__regression/config.json
ğŸš€ Starting Autonomous Pipeline for https___bitbucket_org__regression...

[Step 0/7] ğŸ“‹ Strategic Test Planning...
âš ï¸ Pre-Planning Failed: attempted relative import with no known parent package
ğŸ“ Failure logged to knowledge/failures.json

[Step 1/7] ğŸ—ºï¸  Exploring & Mining (Plan-Guided)...

[Step 2/7] ğŸ“– Updating Knowledge Bank...
ğŸ“– Knowledge Bank updated for bitbucket.org

[Step 3/7] ğŸ’» Generating Robust Code...
âŒ Code Generation Failed!
ğŸ“ Failure logged to knowledge/failures.json
âœ… POM Structure generated: projects/https___bitbucket_org__regression/outputs/pom_structure.json
{
  "base_url": "https://bitbucket.org/",
  "workflow": "Autonomous smoke test: Navigate site, explore main features, verify key elements",
  "pages": [
    {
      "name": "SoftwareBitbucketPricingPage",
      "url": "/software/bitbucket/pricing",
      "locators": [
        {
          "name": "pricing_link",
          "selector": "get_by_role(\"link\", name=\"Pricing\")",
          "element": {
            "tag": "a",
            "text": "Pricing",
            "role": ""
          }
        },
        {
          "name": "why_bitbucket_link",
          "selector": "get_by_role(\"button\", name=\"Why Bitbucket\")",
          "element": {
            "tag": "a",
            "text": "Why Bitbucket",
            "role": "button"
          }
        },
        {
          "name": "cloud_security_link",
          "selector": "get_by_role(\"link\", name=\"Cloud Security\")",
          "element": {
            "tag": "a",
            "text": "Cloud Security",
            "role": ""
          }
        },
        {
          "name": "devsecops_link",
          "selector": "get_by_role(\"link\", name=\"DevSecOps\")",
          "element": {
            "tag": "a",
            "text": "DevSecOps",
            "role": ""
          }
        },
        {
          "name": "get_it_free_link",
          "selector": "get_by_text('Get it Free')",
          "element": {
            "tag": "a",
            "text": "Get it Free",
            "role": ""
          }
        }
      ],
      "actions": [
        {
          "name": "click_pricing_link",
          "steps": [
            {
              "step": 0,
              "action": "click",
              "locator_name": "pricing_link",
              "value": null,
              "thought": "The goal is to navigate the site and explore the main features. I am on the login screen and do not have credentials. I will explore the 'Pricing' page to avoid the login screen. There is an element with the text 'Pricing' and tag 'a', with id 14. I will click it."
            }
          ],
          "params": ""
        },
        {
          "name": "click_pricing_link",
          "steps": [
            {
              "step": 3,
              "action": "click",
              "locator_name": "pricing_link",
              "value": null,
              "thought": "The goal is to navigate the site and explore main features. The previous actions were to click 'Why Bitbucket' after navigating to the Bitbucket homepage. Since the page is now on the login screen but there is no login information, I will click on the 'Pricing' link next. This allows me to explore a key feature of the site without logging in."
            }
          ],
          "params": ""
        },
        {
          "name": "click_why_bitbucket_link",
          "steps": [
            {
              "step": 4,
              "action": "click",
              "locator_name": "why_bitbucket_link",
              "value": null,
              "thought": "The goal is to navigate the site and explore the main features. I have already navigated to the pricing page. Now, I will click the 'Why Bitbucket' link to explore another main feature of the website."
            }
          ],
          "params": ""
        },
        {
          "name": "click_cloud_security_link",
          "steps": [
            {
              "step": 5,
              "action": "click",
              "locator_name": "cloud_security_link",
              "value": null,
              "thought": "I am currently on the Bitbucket Pricing page. The goal is to autonomously smoke test the site, explore the main features, and verify key elements. I have already clicked on 'Pricing' and 'Why Bitbucket' links multiple times. To proceed with exploring main features, I will now click on the 'Cloud Security' link."
            }
          ],
          "params": ""
        },
        {
          "name": "click_devsecops_link",
          "steps": [
            {
              "step": 6,
              "action": "click",
              "locator_name": "devsecops_link",
              "value": null,
              "thought": "I have navigated to the pricing page, clicked on 'Why Bitbucket', 'Pricing' again, then 'Why Bitbucket' again, and finally 'Cloud Security'. The goal is to explore the main features. I'll click on another main feature, 'DevSecOps'."
            }
          ],
          "params": ""
        },
        {
          "name": "click_get_it_free_link",
          "steps": [
            {
              "step": 7,
              "action": "click",
              "locator_name": "get_it_free_link",
              "value": null,
              "thought": "The goal is to navigate the site and explore main features. I've already clicked on a few features. Now I am on the pricing page. I will click the 'Get it Free' button to navigate to a free option."
            }
          ],
          "params": ""
        }
      ]
    },
    {
      "name": "SoftwareBitbucketPage",
      "url": "/software/bitbucket",
      "locators": [
        {
          "name": "login_button",
          "selector": "get_by_role(\"button\", name=\"Why Bitbucket\")",
          "element": {
            "tag": "button",
            "text": "Why Bitbucket",
            "role": ""
          }
        }
      ],
      "actions": [
        {
          "name": "click_login_button",
          "steps": [
            {
              "step": 2,
              "action": "click",
              "locator_name": "login_button",
              "value": null,
              "thought": "I am on the Bitbucket homepage, which is a login screen. The history indicates that I already navigated to the pricing page and then back to the homepage. The goal is to navigate the site and explore main features. Since there are no credentials, I will explore public links. I will now click the 'Why Bitbucket' dropdown to see the options under it."
            }
          ],
          "params": ""
        }
      ]
    },
    {
      "name": "CompanyPage",
      "url": "/company",
      "locators": [
        {
          "name": "company_link",
          "selector": "get_by_role(\"link\", name=\"Company\")",
          "element": {
            "tag": "a",
            "text": "Company",
            "role": ""
          }
        }
      ],
      "actions": [
        {
          "name": "click_company_link",
          "steps": [
            {
              "step": 9,
              "action": "click",
              "locator_name": "company_link",
              "value": null,
              "thought": "I have already navigated back to the landing page. The goal is to navigate the site and explore main features. Since I don't have login credentials, I will skip signing in and instead explore public areas like the footer links. Clicking on 'Company' will help explore the site."
            }
          ],
          "params": ""
        }
      ]
    },
    {
      "name": "CustomersPage",
      "url": "/customers",
      "locators": [
        {
          "name": "customers_link",
          "selector": "get_by_role(\"link\", name=\"Customers\")",
          "element": {
            "tag": "a",
            "text": "Customers",
            "role": ""
          }
        }
      ],
      "actions": [
        {
          "name": "click_customers_link",
          "steps": [
            {
              "step": 10,
              "action": "click",
              "locator_name": "customers_link",
              "value": null,
              "thought": "The goal is to perform a smoke test, exploring main features and verifying key elements. I'm currently on the Atlassian Company page. I've already navigated to the company page. Now I will click on the 'Customers' link to explore another main feature."
            }
          ],
          "params": ""
        }
      ]
    }
  ],
  "tests": [
    {
      "name": "test_workflow_execution",
      "description": "Autonomous smoke test: Navigate site, explore main features, verify key elements",
      "steps_description": [
        "The goal is to navigate the site and explore the main features. I am on the login screen and do not have credentials. I will explore the 'Pricing' page to avoid the login screen. There is an element with the text 'Pricing' and tag 'a', with id 14. I will click it.",
        "The user wants to explore the site as part of a smoke test. I am currently on the pricing page. Since there are no credentials in test data, I will skip login and instead explore publicly available areas. I will navigate back to the homepage to explore from there.",
        "I am on the Bitbucket homepage, which is a login screen. The history indicates that I already navigated to the pricing page and then back to the homepage. The goal is to navigate the site and explore main features. Since there are no credentials, I will explore public links. I will now click the 'Why Bitbucket' dropdown to see the options under it.",
        "The goal is to navigate the site and explore main features. The previous actions were to click 'Why Bitbucket' after navigating to the Bitbucket homepage. Since the page is now on the login screen but there is no login information, I will click on the 'Pricing' link next. This allows me to explore a key feature of the site without logging in.",
        "The goal is to navigate the site and explore the main features. I have already navigated to the pricing page. Now, I will click the 'Why Bitbucket' link to explore another main feature of the website.",
        "I am currently on the Bitbucket Pricing page. The goal is to autonomously smoke test the site, explore the main features, and verify key elements. I have already clicked on 'Pricing' and 'Why Bitbucket' links multiple times. To proceed with exploring main features, I will now click on the 'Cloud Security' link.",
        "I have navigated to the pricing page, clicked on 'Why Bitbucket', 'Pricing' again, then 'Why Bitbucket' again, and finally 'Cloud Security'. The goal is to explore the main features. I'll click on another main feature, 'DevSecOps'.",
        "The goal is to navigate the site and explore main features. I've already clicked on a few features. Now I am on the pricing page. I will click the 'Get it Free' button to navigate to a free option.",
        "The goal is to smoke test the site, exploring main features and verifying key elements. I have already navigated to the pricing page and clicked on a few links there ('Why Bitbucket', 'Cloud Security', 'DevSecOps', 'Get it Free'). Since there are no interactive elements on the current page according to `elements`, I should navigate back to the home page to explore other main features.",
        "I have already navigated back to the landing page. The goal is to navigate the site and explore main features. Since I don't have login credentials, I will skip signing in and instead explore public areas like the footer links. Clicking on 'Company' will help explore the site.",
        "The goal is to perform a smoke test, exploring main features and verifying key elements. I'm currently on the Atlassian Company page. I've already navigated to the company page. Now I will click on the 'Customers' link to explore another main feature."
      ],
      "page_objects": [
        {
          "class_name": "SoftwareBitbucketPricingPage",
          "var_name": "software_bitbucket_pricing_page",
          "goto": true,
          "description": "Page object for SoftwareBitbucketPricing"
        },
        {
          "class_name": "SoftwareBitbucketPage",
          "var_name": "software_bitbucket_page",
          "goto": false,
          "description": "Page object for SoftwareBitbucket"
        },
        {
          "class_name": "CompanyPage",
          "var_name": "company_page",
          "goto": false,
          "description": "Page object for Company"
        },
        {
          "class_name": "CustomersPage",
          "var_name": "customers_page",
          "goto": false,
          "description": "Page object for Customers"
        }
      ],
      "actions": [
        {
          "code": "software_bitbucket_pricing_page.click_pricing_link()",
          "comment": "The goal is to navigate the site and explore the main featur"
        },
        {
          "code": "software_bitbucket_pricing_page.click_pricing_link()",
          "comment": "The goal is to navigate the site and explore main features. "
        },
        {
          "code": "software_bitbucket_pricing_page.click_why_bitbucket_link()",
          "comment": "The goal is to navigate the site and explore the main featur"
        },
        {
          "code": "software_bitbucket_pricing_page.click_cloud_security_link()",
          "comment": "I am currently on the Bitbucket Pricing page. The goal is to"
        },
        {
          "code": "software_bitbucket_pricing_page.click_devsecops_link()",
          "comment": "I have navigated to the pricing page, clicked on 'Why Bitbuc"
        },
        {
          "code": "software_bitbucket_pricing_page.click_get_it_free_link()",
          "comment": "The goal is to navigate the site and explore main features. "
        },
        {
          "code": "software_bitbucket_page.click_login_button()",
          "comment": "I am on the Bitbucket homepage, which is a login screen. The"
        },
        {
          "code": "company_page.click_company_link()",
          "comment": "I have already navigated back to the landing page. The goal "
        },
        {
          "code": "customers_page.click_customers_link()",
          "comment": "The goal is to perform a smoke test, exploring main features"
        }
      ],
      "assertions": [
        {
          "code": "expect(page).to_have_url(re.compile(\".*\"))",
          "comment": "Verify page navigation successful"
        }
      ]
    }
  ]
}
âœ… Generated: projects/https___bitbucket_org__regression/pages/base_page.py
âœ… Generated: projects/https___bitbucket_org__regression/pages/software_bitbucket_pricing_page.py
âœ… Generated: projects/https___bitbucket_org__regression/pages/software_bitbucket_page.py
âœ… Generated: projects/https___bitbucket_org__regression/pages/company_page.py
âœ… Generated: projects/https___bitbucket_org__regression/pages/customers_page.py
âœ… Generated: projects/https___bitbucket_org__regression/pages/__init__.py
âœ… Generated: projects/https___bitbucket_org__regression/tests/e2e/test_main.py

ğŸ‰ POM Generation Complete!
ğŸ“ Pages: 4 files
ğŸ“ Tests: 1 files
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.11.14/x64/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.11.14', 'Platform': 'Linux-6.11.0-1018-azure-x86_64-with-glibc2.39', 'Packages': {'pytest': '9.0.2', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'base-url': '2.1.0', 'anyio': '4.12.0', 'playwright': '0.7.2', 'metadata': '3.1.1', 'langsmith': '0.6.0'}, 'CI': 'true', 'JAVA_HOME': '/usr/lib/jvm/temurin-17-jdk-amd64', 'Base URL': ''}
rootdir: /home/runner/work/build_qa_automation/build_qa_automation
plugins: html-4.1.1, base-url-2.1.0, anyio-4.12.0, playwright-0.7.2, metadata-3.1.1, langsmith-0.6.0
collecting ... collected 1 item

projects/https___bitbucket_org__regression/tests/e2e/test_main.py::test_workflow_execution[chromium] FAILED [100%]

=================================== FAILURES ===================================
______________________ test_workflow_execution[chromium] _______________________

page = <Page url='https://bitbucket.org/'>

    def test_workflow_execution(page: Page):
        """
        Autonomous smoke test: Navigate site, explore main features, verify key elements
    
        Test Steps:
    
        1. The goal is to navigate the site and explore the main features. I am on the login screen and do not have credentials. I will explore the 'Pricing' page to avoid the login screen. There is an element with the text 'Pricing' and tag 'a', with id 14. I will click it.
    
        2. The user wants to explore the site as part of a smoke test. I am currently on the pricing page. Since there are no credentials in test data, I will skip login and instead explore publicly available areas. I will navigate back to the homepage to explore from there.
    
        3. I am on the Bitbucket homepage, which is a login screen. The history indicates that I already navigated to the pricing page and then back to the homepage. The goal is to navigate the site and explore main features. Since there are no credentials, I will explore public links. I will now click the 'Why Bitbucket' dropdown to see the options under it.
    
        4. The goal is to navigate the site and explore main features. The previous actions were to click 'Why Bitbucket' after navigating to the Bitbucket homepage. Since the page is now on the login screen but there is no login information, I will click on the 'Pricing' link next. This allows me to explore a key feature of the site without logging in.
    
        5. The goal is to navigate the site and explore the main features. I have already navigated to the pricing page. Now, I will click the 'Why Bitbucket' link to explore another main feature of the website.
    
        6. I am currently on the Bitbucket Pricing page. The goal is to autonomously smoke test the site, explore the main features, and verify key elements. I have already clicked on 'Pricing' and 'Why Bitbucket' links multiple times. To proceed with exploring main features, I will now click on the 'Cloud Security' link.
    
        7. I have navigated to the pricing page, clicked on 'Why Bitbucket', 'Pricing' again, then 'Why Bitbucket' again, and finally 'Cloud Security'. The goal is to explore the main features. I'll click on another main feature, 'DevSecOps'.
    
        8. The goal is to navigate the site and explore main features. I've already clicked on a few features. Now I am on the pricing page. I will click the 'Get it Free' button to navigate to a free option.
    
        9. The goal is to smoke test the site, exploring main features and verifying key elements. I have already navigated to the pricing page and clicked on a few links there ('Why Bitbucket', 'Cloud Security', 'DevSecOps', 'Get it Free'). Since there are no interactive elements on the current page according to `elements`, I should navigate back to the home page to explore other main features.
    
        10. I have already navigated back to the landing page. The goal is to navigate the site and explore main features. Since I don't have login credentials, I will skip signing in and instead explore public areas like the footer links. Clicking on 'Company' will help explore the site.
    
        11. The goal is to perform a smoke test, exploring main features and verifying key elements. I'm currently on the Atlassian Company page. I've already navigated to the company page. Now I will click on the 'Customers' link to explore another main feature.
    
        """
        # ==================== ARRANGE ====================
        # Initialize page objects
    
        software_bitbucket_pricing_page = SoftwareBitbucketPricingPage(page)  # Page object for SoftwareBitbucketPricing
    
    
        software_bitbucket_page = SoftwareBitbucketPage(page)  # Page object for SoftwareBitbucket
    
    
        company_page = CompanyPage(page)  # Page object for Company
    
    
        customers_page = CustomersPage(page)  # Page object for Customers
    
    
    
        # ==================== ACT ====================
        # Execute workflow actions
    
>       software_bitbucket_pricing_page.click_pricing_link()  # The goal is to navigate the site and explore the main featur
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

projects/https___bitbucket_org__regression/tests/e2e/test_main.py:79: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
projects/https___bitbucket_org__regression/pages/software_bitbucket_pricing_page.py:61: in click_pricing_link
    self.do_click(self.pricing_link)  # Click pricing_link
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
projects/https___bitbucket_org__regression/pages/base_page.py:20: in do_click
    locator.click(timeout=5000) # Fast fail first
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/playwright/sync_api/_generated.py:15637: in click
    self._sync(
/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/playwright/_impl/_locator.py:162: in click
    return await self._frame._click(self._selector, strict=True, **params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/playwright/_impl/_frame.py:566: in _click
    await self._channel.send("click", self._timeout, locals_to_params(locals()))
/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py:69: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x7f6dfaba7790>
cb = <function Channel.send.<locals>.<lambda> at 0x7f6dfa81bec0>
is_internal = False, title = None

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", None
        ) or inspect.stack(0)
    
        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.Error: Locator.click: Error: strict mode violation: get_by_role("link", name="Pricing") resolved to 2 elements:
E               1) <a data-event="clicked" data-schema-version="1" data-uuid="0529e20d-fa-link" data-product-key="bitbucket" data-event-component="linkButton" class="nav-link-button main current-page-false" data-event-container="globalNav-navigation-link" href="http://www.atlassian.com/software/bitbucket/pricing" data-navlinkid="nav-link-0529e20d-fa0c-4d0d-86d0-75e9711d5ab1"> Pricing </a> aka get_by_role("link", name="Pricing", exact=True)
E               2) <a data-event="clicked" href="/product/pricing" data-uuid="360affbf-37" data-schema-version="1" data-product-key="bitbucket" data-label="Plans & pricing" class="component__link default " data-event-component="linkButton" data-event-container="linkButton" data-label-english="Plans & pricing"> Plans & pricing </a> aka get_by_role("link", name="Plans & pricing")
E           
E           Call log:
E             - waiting for get_by_role("link", name="Pricing")

/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/playwright/_impl/_connection.py:559: Error
- Generated html report: file:///home/runner/work/build_qa_automation/build_qa_automation/projects/https___bitbucket_org__regression/outputs/pytest_report.html -
=========================== short test summary info ============================
FAILED projects/https___bitbucket_org__regression/tests/e2e/test_main.py::test_workflow_execution[chromium] - playwright._impl._errors.Error: Locator.click: Error: strict mode violation: get_by_role("link", name="Pricing") resolved to 2 elements:
    1) <a data-event="clicked" data-schema-version="1" data-uuid="0529e20d-fa-link" data-product-key="bitbucket" data-event-component="linkButton" class="nav-link-button main current-page-false" data-event-container="globalNav-navigation-link" href="http://www.atlassian.com/software/bitbucket/pricing" data-navlinkid="nav-link-0529e20d-fa0c-4d0d-86d0-75e9711d5ab1"> Pricing </a> aka get_by_role("link", name="Pricing", exact=True)
    2) <a data-event="clicked" href="/product/pricing" data-uuid="360affbf-37" data-schema-version="1" data-product-key="bitbucket" data-label="Plans & pricing" class="component__link default " data-event-component="linkButton" data-event-container="linkButton" data-label-english="Plans & pricing"> Plans & pricing </a> aka get_by_role("link", name="Plans & pricing")

Call log:
  - waiting for get_by_role("link", name="Pricing")
============================== 1 failed in 1.90s ===============================

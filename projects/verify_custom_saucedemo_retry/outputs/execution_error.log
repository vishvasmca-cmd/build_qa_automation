============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\vishv\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\vishv\.gemini\antigravity\playground\inner-event
plugins: anyio-4.12.0, langsmith-0.5.2, base-url-2.1.0, playwright-0.7.2
collecting ... collected 1 item

projects/verify_custom_saucedemo_retry/tests/test_main.py::test_minimal_smoke[chromium] [Minimal Test] Navigating to https://www.saucedemo.com/
[Minimal Test] Page loaded: Swag Labs
[SCREENSHOT] Saved: C:\Users\vishv\.gemini\antigravity\playground\inner-event\projects\verify_custom_saucedemo_retry\outputs\screenshots\smoke_test_final.png
FAILED

================================== FAILURES ===================================
________________________ test_minimal_smoke[chromium] _________________________

browser = <Browser type=<BrowserType name=chromium executable_path=C:\Users\vishv\AppData\Local\ms-playwright\chromium-1200\chrome-win64\chrome.exe> version=143.0.7499.4>

    def test_minimal_smoke(browser: Browser):
        """Minimal smoke test: Navigate + Screenshot + Basic Assertion"""
        # 1. Setup
        context = browser.new_context(viewport={"width": 1920, "height": 1080})
        page = context.new_page()
    
        # 2. Navigate to site
        print(f"[Minimal Test] Navigating to https://www.saucedemo.com/")
        page.goto("https://www.saucedemo.com/")
        wait_for_stability(page)
    
        # 3. Basic verification: Page loaded successfully
        # Check either URL matches OR page has a title
        current_url = page.url
        page_title = page.title()
    
        assert "https://www.saucedemo.com/" in current_url or page_title, \
            f"Page failed to load. Current URL: {current_url}, Title: {page_title}"
    
        print(f"[Minimal Test] Page loaded: {page_title or current_url}")
    
        # 4. Take screenshot for visual validation
        take_screenshot(page, "smoke_test_final", "verify_custom_saucedemo_retry")
    
        # 5. Cleanup
        context.close()
    
>       print("\u2705 Minimal smoke test PASSED: Site is accessible")

projects\verify_custom_saucedemo_retry\tests\test_main.py:53: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <encodings.cp1252.IncrementalEncoder object at 0x00000177C08C9FD0>
input = '\u2705 Minimal smoke test PASSED: Site is accessible', final = False

    def encode(self, input, final=False):
>       return codecs.charmap_encode(input,self.errors,encoding_table)[0]
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 0: character maps to <undefined>

..\..\..\..\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py:19: UnicodeEncodeError
=========================== short test summary info ===========================
FAILED projects/verify_custom_saucedemo_retry/tests/test_main.py::test_minimal_smoke[chromium]
============================== 1 failed in 2.53s ==============================

